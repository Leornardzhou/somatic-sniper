h1. SomaticSniper

p. The purpose of this program is to identify single nucleotide positions that are different between tumor and normal (or in theory, any two bam files). It takes a tumor bam and a normal bam and compares the two to determine the differences. Complete documentation is available at the project "web site":http://gmt.genome.wustl.edu/somatic-sniper/ or in the included "pdf":https://github.com/genome/somatic-sniper/blob/master/docs/sniper_manual.pdf.

h2. Build Dependencies

* git
* cmake 2.8+ ("cmake.org":http://cmake.org)
* samtools 0.1.6 ("sourceforge download page":http://sourceforge.net/projects/samtools/files/samtools/0.1.6/)
** Newer versions will NOT work with SomaticSniper

h2. Build Instructions

h3. Install dependencies

* Install some packaged dependencies for RPM-based systems (Fedora, CentOS, RHEL):

bc. sudo yum install curl gcc make cmake perl git samtools-devel zlib-devel

* For APT-based systems (Debian, Ubuntu), install the following packages instead:

bc. sudo apt-get install curl gcc make cmake perl git libbam-dev zlib1g-dev

h3. Build Samtools

* Download Samtools v0.1.6, unzip it, and enter the directory:

bc. curl -LO http://sourceforge.net/projects/samtools/files/samtools/0.1.6/samtools-0.1.6.tar.bz2
tar -jxvf samtools-0.1.6.tar.bz2
cd samtools-0.1.6

* This older Samtools had a bug in the @Makefile@. In line 39, you need to move @-lz@ to the end of the line. Like this:

bc. $(CC) $(CFLAGS) -o $@ $(AOBJS) -lm $(LIBPATH) $(LIBCURSES) -L. -lbam -lz

* Build Samtools v0.1.6 and store this path in an environment variable called @SAMTOOLS_ROOT@:

bc. make
export SAMTOOLS_ROOT=`pwd`
cd ..

h3. Clone the SomaticSniper repository

Recursively clone the git repository

bc. git clone --recursive git://github.com/genome/somatic-sniper.git

h3. Build SomaticSniper

SomaticSniper does not support in-source builds. So create a subdirectory, enter it, build, and run tests:

bc. mkdir somatic-sniper/build
cd somatic-sniper/build
cmake ../
make
make test

The binary @bam-somaticsniper@ can then be found under @somatic-sniper/build/bin@. If you have administrative rights, then run @sudo make install@ to install the tool for all users under @/usr/bin@.

h2. FAQ

h3. I get lots of compile errors indicating that files are missing. How do I fix this?

SomaticSniper requires that it be linked to an old version of samtools (v0.1.6). This typically happens because you have attempted to link to a newer version.

h3. I get errors from cmake about missing modules. How do I fix this?

SomaticSniper contains a git submodule called build-common. It contains helper modules for cmake. If you downloaded the source as a tarball from github or forgot to do a recursive clone using git, then you will not have this submodule and will see cmake errors. If you are using git, we recommend you go back and use the --recursive option when cloning the SomaticSniper repository. If you cannot use git, follow the instructions below to remedy the situation.

# Download the build-common module separately "here":https://github.com/genome/build-common/tarball/master
# Extract that tarball, and rename the directory it creates to 'build-common'.
# Replace the empty build-common subdirectory in the sniper directory with directory you just created.
# Resume following the build instructions.

h2. User Support

p. Please first search "Biostar":http://www.biostars.org and then ask a question there if needed.  We automatically monitor "Biostar":http://www.biostars.org for questions related to our tools.
